{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/policy.service\";\nimport * as i2 from \"../../services/claim.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AdminDashboardComponent_div_9_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_9_button_1_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const s_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.useSuggestion(s_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", s_r7.policy_number, \" \\u2014 \", s_r7.customer_name, \" (\", s_r7.type, \") \");\n  }\n}\nfunction AdminDashboardComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, AdminDashboardComponent_div_9_button_1_Template, 2, 3, \"button\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.suggestions);\n  }\n}\nfunction AdminDashboardComponent_tr_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 23)(16, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_tr_36_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const p_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.startEdit(p_r10));\n    });\n    i0.ɵɵtext(17, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_tr_36_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const p_r10 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.remove(p_r10.policy_id));\n    });\n    i0.ɵɵtext(19, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.policy_number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.customer_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.premium);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.start_date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.end_date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r10.user_id);\n  }\n}\nfunction AdminDashboardComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"div\", 1)(2, \"h6\", 27);\n    i0.ɵɵtext(3, \"Create Policy\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 28)(5, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.newPolicy.policy_number = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 28)(7, \"input\", 30);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.newPolicy.customer_name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 28)(9, \"input\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.newPolicy.type = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 32)(11, \"input\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.newPolicy.premium = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 32)(13, \"input\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.newPolicy.user_id = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 32)(15, \"label\", 35);\n    i0.ɵɵtext(16, \"Start date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.newPolicy.start_date = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 32)(19, \"label\", 35);\n    i0.ɵɵtext(20, \"End date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_37_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.newPolicy.end_date = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 1)(23, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_37_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.create());\n    });\n    i0.ɵɵtext(24, \"Create\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.policy_number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.customer_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.premium);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.user_id);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.start_date);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newPolicy.end_date);\n  }\n}\nfunction AdminDashboardComponent_ng_container_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 26)(2, \"div\", 1)(3, \"h6\", 27);\n    i0.ɵɵtext(4, \"Edit Policy\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 28)(6, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.editPolicy.policy_number = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 28)(8, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.editPolicy.customer_name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 28)(10, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.editPolicy.type = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 32)(12, \"input\", 39);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.editPolicy.premium = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 32)(14, \"input\", 39);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.editPolicy.user_id = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 32)(16, \"label\", 35);\n    i0.ɵɵtext(17, \"Start date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.editPolicy.start_date = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 32)(20, \"label\", 35);\n    i0.ɵɵtext(21, \"End date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_ng_container_38_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.editPolicy.end_date = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 40)(24, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_ng_container_38_Template_button_click_24_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.update());\n    });\n    i0.ɵɵtext(25, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_ng_container_38_Template_button_click_26_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.editPolicy = null);\n    });\n    i0.ɵɵtext(27, \"Cancel\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.policy_number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.customer_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.premium);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.user_id);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.start_date);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editPolicy.end_date);\n  }\n}\nfunction AdminDashboardComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"No claims yet.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_44_tr_23_a_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 48);\n    i0.ɵɵtext(1, \"Open\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r34 = i0.ɵɵnextContext().$implicit;\n    const ctx_r35 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"href\", ctx_r35.attachment(c_r34), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminDashboardComponent_div_44_tr_23_a_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 49);\n    i0.ɵɵtext(1, \"Download\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r34 = i0.ɵɵnextContext().$implicit;\n    const ctx_r36 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"href\", ctx_r36.attachment(c_r34, true), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminDashboardComponent_div_44_tr_23_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r34 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Previous: \", c_r34.remarks, \"\");\n  }\n}\nfunction AdminDashboardComponent_div_44_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"span\", 42);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtemplate(16, AdminDashboardComponent_div_44_tr_23_a_16_Template, 2, 1, \"a\", 43);\n    i0.ɵɵtemplate(17, AdminDashboardComponent_div_44_tr_23_a_17_Template, 2, 1, \"a\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\", 45)(19, \"input\", 46);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_div_44_tr_23_Template_input_ngModelChange_19_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const c_r34 = restoredCtx.$implicit;\n      const ctx_r41 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r41.remarksMap[c_r34.claim_id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, AdminDashboardComponent_div_44_tr_23_div_20_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\", 23)(22, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_44_tr_23_Template_button_click_22_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const c_r34 = restoredCtx.$implicit;\n      const ctx_r43 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r43.approve(c_r34.claim_id));\n    });\n    i0.ɵɵtext(23, \"Approve\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_44_tr_23_Template_button_click_24_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const c_r34 = restoredCtx.$implicit;\n      const ctx_r44 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r44.reject(c_r34.claim_id));\n    });\n    i0.ɵɵtext(25, \"Reject\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const c_r34 = ctx.$implicit;\n    const ctx_r33 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r34.claim_id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r33.claimUserIdMap[c_r34.claim_id] || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r34.policy_number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r34.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 16, c_r34.created_at, \"mediumDate\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"bg-secondary\", c_r34.status === \"Pending\")(\"bg-success\", c_r34.status === \"Approved\")(\"bg-danger\", c_r34.status === \"Rejected\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r34.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", c_r34.attachment);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", c_r34.attachment);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r33.remarksMap[c_r34.claim_id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", c_r34.remarks);\n  }\n}\nfunction AdminDashboardComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"table\", 13)(2, \"thead\", 14)(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"#\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"User ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Policy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Date of Claim\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Attachment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"Remarks\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tbody\");\n    i0.ɵɵtemplate(23, AdminDashboardComponent_div_44_tr_23_Template, 26, 19, \"tr\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(23);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.claims);\n  }\n}\nexport let AdminDashboardComponent = /*#__PURE__*/(() => {\n  class AdminDashboardComponent {\n    constructor(policySvc, claimSvc) {\n      this.policySvc = policySvc;\n      this.claimSvc = claimSvc;\n      this.policies = [];\n      this.claims = [];\n      this.policyQuery = '';\n      this.suggestions = [];\n      this.showCreate = false;\n      this.newPolicy = {\n        policy_number: '',\n        customer_name: '',\n        type: '',\n        premium: 0,\n        start_date: '',\n        end_date: '',\n        user_id: 0\n      };\n      this.editPolicy = null;\n      this.remarksMap = {};\n      this.claimUserIdMap = {};\n    }\n    ngOnInit() {\n      this.loadAll();\n    }\n    attachment(c, dl = false) {\n      return this.claimSvc.attachmentUrl(c.attachment, dl);\n    }\n    loadAll() {\n      this.policySvc.list().subscribe(d => this.policies = d || []);\n      this.refreshClaims();\n    }\n    refreshClaimsForUser(uid) {\n      this.claimSvc.byUser(uid).subscribe(cs => {\n        this.claims = cs || [];\n        this.decorateClaims();\n      });\n    }\n    refreshClaims() {\n      this.claimSvc.list().subscribe(cs => {\n        this.claims = cs || [];\n        this.decorateClaims();\n      });\n    }\n    decorateClaims() {\n      this.claimUserIdMap = {};\n      this.remarksMap = {};\n      this.claims.forEach(c => {\n        this.remarksMap[c.claim_id] = c.remarks || '';\n        this.policySvc.verify(c.policy_number).subscribe(res => {\n          const p = res?.policy;\n          if (p) {\n            this.claimUserIdMap[c.claim_id] = p.user_id;\n          }\n        });\n      });\n    }\n    search() {\n      const q = this.policyQuery.trim();\n      if (!q) {\n        this.loadAll();\n        return;\n      }\n      const asNum = Number(q);\n      const isUserId = !isNaN(asNum) && q.match(/^\\d+$/);\n      if (isUserId) {\n        this.policySvc.byUser(asNum).subscribe(p => this.policies = p || []);\n        this.refreshClaimsForUser(asNum);\n      } else {\n        this.policySvc.search(q).subscribe(d => this.policies = d || []);\n        this.refreshClaims();\n      }\n    }\n    reset() {\n      this.policyQuery = '';\n      this.suggestions = [];\n      this.loadAll();\n    }\n    onQueryChange() {\n      const q = this.policyQuery.trim();\n      if (!q || q.match(/^\\d+$/)) {\n        this.suggestions = [];\n        return;\n      }\n      this.policySvc.search(q).subscribe(res => this.suggestions = res || []);\n    }\n    useSuggestion(s) {\n      this.policyQuery = s.policy_number;\n      this.search();\n      this.suggestions = [];\n    }\n    toggleCreate() {\n      this.showCreate = !this.showCreate;\n    }\n    create() {\n      if (this.newPolicy.premium < 0 || this.newPolicy.user_id < 0) {\n        alert('Premium and User ID must be non-negative.');\n        return;\n      }\n      if (!this.newPolicy.start_date || !this.newPolicy.end_date || new Date(this.newPolicy.end_date) <= new Date(this.newPolicy.start_date)) {\n        alert('End date must be greater than start date');\n        return;\n      }\n      this.policySvc.create(this.newPolicy).subscribe(() => {\n        this.newPolicy = {\n          policy_number: '',\n          customer_name: '',\n          type: '',\n          premium: 0,\n          start_date: '',\n          end_date: '',\n          user_id: 0\n        };\n        this.loadAll();\n        this.showCreate = false;\n      });\n    }\n    startEdit(p) {\n      this.editPolicy = {\n        ...p\n      };\n      this.showCreate = false;\n    }\n    update() {\n      if (this.editPolicy.premium < 0 || this.editPolicy.user_id < 0) {\n        alert('Premium and User ID must be non-negative.');\n        return;\n      }\n      if (!this.editPolicy.start_date || !this.editPolicy.end_date || new Date(this.editPolicy.end_date) <= new Date(this.editPolicy.start_date)) {\n        alert('End date must be greater than start date');\n        return;\n      }\n      this.policySvc.update(this.editPolicy.policy_id, this.editPolicy).subscribe(() => {\n        this.editPolicy = null;\n        this.loadAll();\n      });\n    }\n    remove(id) {\n      if (!confirm('Delete policy?')) return;\n      this.policySvc.remove(id).subscribe(() => this.loadAll());\n    }\n    approve(id) {\n      const remarks = this.remarksMap[id] || 'Approved by admin';\n      this.claimSvc.approve(id, remarks).subscribe(() => this.refreshClaims());\n    }\n    reject(id) {\n      const remarks = this.remarksMap[id] || 'Rejected by admin';\n      this.claimSvc.reject(id, remarks).subscribe(() => this.refreshClaims());\n    }\n    static {\n      this.ɵfac = function AdminDashboardComponent_Factory(t) {\n        return new (t || AdminDashboardComponent)(i0.ɵɵdirectiveInject(i1.PolicyService), i0.ɵɵdirectiveInject(i2.ClaimService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AdminDashboardComponent,\n        selectors: [[\"app-admin-dashboard\"]],\n        decls: 45,\n        vars: 8,\n        consts: [[1, \"row\", \"g-4\"], [1, \"col-12\"], [1, \"card\", \"p-3\", \"shadow-sm\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\", \"flex-wrap\", \"gap-2\", \"mb-2\"], [1, \"m-0\"], [1, \"d-flex\", \"gap-2\", \"w-100\", \"w-md-auto\"], [1, \"position-relative\", \"flex-grow-1\"], [\"placeholder\", \"Search policy/name/type OR type a User ID\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"class\", \"list-group position-absolute w-100\", \"style\", \"z-index: 10;\", 4, \"ngIf\"], [1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table-responsive-md\"], [1, \"table\", \"table-striped\", \"align-middle\"], [1, \"table-light\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"row g-2 mt-2\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"text-muted small\", 4, \"ngIf\"], [\"class\", \"table-responsive-md\", 4, \"ngIf\"], [1, \"list-group\", \"position-absolute\", \"w-100\", 2, \"z-index\", \"10\"], [\"class\", \"list-group-item list-group-item-action\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"list-group-item-action\", 3, \"click\"], [1, \"text-end\"], [1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"me-1\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [1, \"row\", \"g-2\", \"mt-2\"], [1, \"mt-2\"], [1, \"col-md-4\"], [\"placeholder\", \"Policy Number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Customer Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Type (Health, Car...)\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-3\"], [\"type\", \"number\", \"placeholder\", \"Premium\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"User ID\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-label\", \"small\", \"mb-1\"], [\"type\", \"date\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-12\", \"d-flex\", \"gap-2\"], [1, \"text-muted\", \"small\"], [1, \"badge\"], [\"target\", \"_blank\", \"class\", \"link-like me-2\", 3, \"href\", 4, \"ngIf\"], [\"class\", \"link-like\", \"target\", \"_blank\", 3, \"href\", 4, \"ngIf\"], [2, \"min-width\", \"240px\"], [\"placeholder\", \"Enter remarks\", 1, \"form-control\", \"form-control-sm\", \"mb-1\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-sm\", \"btn-success\", \"me-1\", 3, \"click\"], [\"target\", \"_blank\", 1, \"link-like\", \"me-2\", 3, \"href\"], [\"target\", \"_blank\", 1, \"link-like\", 3, \"href\"]],\n        template: function AdminDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h5\", 4);\n            i0.ɵɵtext(5, \"Policies\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"input\", 7);\n            i0.ɵɵlistener(\"ngModelChange\", function AdminDashboardComponent_Template_input_ngModelChange_8_listener($event) {\n              return ctx.policyQuery = $event;\n            })(\"input\", function AdminDashboardComponent_Template_input_input_8_listener() {\n              return ctx.onQueryChange();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(9, AdminDashboardComponent_div_9_Template, 2, 1, \"div\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_button_click_10_listener() {\n              return ctx.search();\n            });\n            i0.ɵɵtext(11, \"Search\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_button_click_12_listener() {\n              return ctx.reset();\n            });\n            i0.ɵɵtext(13, \"Reset\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_button_click_14_listener() {\n              return ctx.toggleCreate();\n            });\n            i0.ɵɵtext(15);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(16, \"div\", 12)(17, \"table\", 13)(18, \"thead\", 14)(19, \"tr\")(20, \"th\");\n            i0.ɵɵtext(21, \"Number\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"th\");\n            i0.ɵɵtext(23, \"Customer\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"th\");\n            i0.ɵɵtext(25, \"Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"th\");\n            i0.ɵɵtext(27, \"Premium\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"th\");\n            i0.ɵɵtext(29, \"Start\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"th\");\n            i0.ɵɵtext(31, \"End\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"th\");\n            i0.ɵɵtext(33, \"User ID\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(34, \"th\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(35, \"tbody\");\n            i0.ɵɵtemplate(36, AdminDashboardComponent_tr_36_Template, 20, 7, \"tr\", 15);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(37, AdminDashboardComponent_div_37_Template, 25, 7, \"div\", 16);\n            i0.ɵɵtemplate(38, AdminDashboardComponent_ng_container_38_Template, 28, 7, \"ng-container\", 17);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(39, \"div\", 1)(40, \"div\", 2)(41, \"h5\");\n            i0.ɵɵtext(42, \"Claims\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(43, AdminDashboardComponent_div_43_Template, 2, 0, \"div\", 18);\n            i0.ɵɵtemplate(44, AdminDashboardComponent_div_44_Template, 24, 1, \"div\", 19);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngModel\", ctx.policyQuery);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.suggestions.length);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.showCreate ? \"Hide Add Policy\" : \"Add Policy\");\n            i0.ɵɵadvance(21);\n            i0.ɵɵproperty(\"ngForOf\", ctx.policies);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.showCreate && !ctx.editPolicy);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.editPolicy);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", !ctx.claims.length);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.claims.length);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.MinValidator, i4.NgModel, i3.DatePipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return AdminDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}